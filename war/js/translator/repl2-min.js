var repl_input,output_list,repl_input_li,__nenv,__venv,__history_front,__history_back;function formatOutput(a){for(var b=[],c=0;c<a.length;c++)b[c]=sexpToString(a[c]);return b}function repl2_setup(){repl_input=document.getElementById("repl-input");repl_input_li=document.getElementById("repl-input-li");output_list=document.getElementById("output-list");__history_front=[];__history_back=[]}
function addToHistory(a){for(;0<__history_back.length;){var b=__history_back.pop();""!=b&&__history_front.push(b)}__history_front.push(a)}function popElementFromHistory(a,b){if(1===a&&0<__history_front.length)return __history_back.push(b),__history_front.pop();return-1===a&&0<__history_back.length?(__history_front.push(b),__history_back.pop()):b}
function readFromRepl(a){a=a.keyCode;if(13===a){a=repl_input.value;try{sexp=lex(a),console.log("// LEXING: ///////////////////////////////////\nraw:"),console.log(sexp),console.log("pretty:\n"+sexpToString(sexp))}catch(b){throw Error("LEXING ERROR\n"+b);}try{var c=parse(sexp);console.log("// PARSING: //////////////////////////////////\nraw:");console.log(c);console.log("pretty:");console.log(c.join("\n"))}catch(e){throw Error("PARSING ERROR\n"+e);}try{var d=desugar(c);console.log("// DESUGARING: //////////////////////////////\nraw");
console.log(d[0]);console.log("pinfo:");console.log(d[1])}catch(f){throw Error("DESUGARING ERROR\n"+f);}repl_input.value="";c=document.createElement("li");c.textContent=a;output_list.insertBefore(c,repl_input_li);addToHistory(a)}else{if(38===a)return repl_input.value=popElementFromHistory(1,repl_input.value),!1;return 40===a?(repl_input.value=popElementFromHistory(-1,repl_input.value),!1):!0}};
